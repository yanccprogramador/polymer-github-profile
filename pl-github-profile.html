<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
 <!-- Compiled and minified CSS -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.3/css/materialize.min.css">

 <!-- Compiled and minified JavaScript -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.3/js/materialize.min.js"></script>
         
<dom-module id="pl-github-profile">
  <template>
      <iron-ajax id="ajax"
      url="https://api.github.com/users/{{username}}"
      handle-as="json"
      on-response="onResponse" auto></iron-ajax>
    <div class="row">
    <div class="col s12 m3">
      <div class="card">
        <div class="card-image">
          <img src="{{img}}" />
          <span class="card-title">
            {{name}}   @{{login}}</span>
        </div>
        <div class="card-content">
          <p>{{bio}}</p>
          <b align="center">{{orgs}}</b>
          <div class="row">
            <div class="col s4"><i class="material-icons">book</i>{{repos}}</div> 
            <div class="col s4"><i class="material-icons" >supervisor_account</i>{{followers}}</div>
            <div class="col s4"><i class="material-icons">perm_identity</i>{{following}}</div>  
          </div>
          </div>
        
      </div>
    </div>
  </div>
    
   
  </template>

  <script>
    /**
     * `pl-github-profile`
     * a pre defined element to see a profile with the best informations on github
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
     Polymer({
        is: 'pl-github-profile',
        properties: {
          img: {
            type: String
          },
          orgs: {
            type: String
          },
          repos: {
            type: String
          },
          bio: {
            type: String
          },
          followers: {
            type: String
          },
          following: {
            type: String
          },
          name: {
            type: String
          },
          login: {
            type: String
          },
          username:{
            type:String
          }
          
        },
        onResponse: function(response) {
          console.log(response.detail.response)
          this.set('img',response.detail.response.avatar_url)
          this.set('orgs',response.detail.response.company)
          this.set('repos',response.detail.response.public_repos)
          this.set('bio',response.detail.response.bio)
          this.set('followers',response.detail.response.followers)
          this.set('following',response.detail.response.following)
          this.set('name',response.detail.response.name)
          this.set('login',response.detail.response.login)                    
        }
      });

  </script>
</dom-module>
